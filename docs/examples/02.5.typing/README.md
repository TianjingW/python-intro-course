# Python и статическая типизация

Для этих примеров вам понядобится Python 3.10 или новее. Любители Conda, Ubintu и прочих источников более старого Python — извините.

Pyhton поддерживает аннотации переменных, а также параметров и возвращаемых значений функций, ну и ещё кой-чего по мелочи.
Эти аннотации в актуальных версиях Pyhton используются для указания типов переменных, параметров функций и параметров обобщённых типов:

* [для функций](https://docs.python.org/3/library/typing.html) (чаще всего);
* [для обобщённых типов](https://docs.python.org/3/library/stdtypes.html#types-genericalias);
* [для переменных](https://peps.python.org/pep-0526/).

Python сам при этом соответствие типов не проверяет. Но:

1. Типы можно проверить при помощи статических анализаторов и проверок времени выполнения.
   Эти анализаторы и проверялки хорошо помогают работать, хотя и сами не лишены ошибок.
2. Аннотации типов распознаются многиим IDE (VS Code, PyCharm и т.д.), и улучшают автодополнение и, опять же, проверку кода.

## Статический анализатор [MyPy](https://pypi.org/project/mypy/)

* Инсталлируется: `pip3 install mypy`
* Запускается: `mypy my_program.py`

Примеры:

* `mypy_test.py` — две ошибки, которые действительно есть;
* `mypy_bug.py` — ложноположительное срабатываение, которое [обсуждается с 2017](https://github.com/python/mypy/issues/3186) (т.е. не всё так просто!) года.

## Системы проверки времени выполнения

### [TypeGuard](https://pypi.org/project/typeguard/)

* Инсталлируется: `pip3 install typeguard`
* Запускается сам вместе с программой, отключается — для экономии можно запустить Python с опцией оптимизации: `python -O my_program.py`

Проверяет во время выполнения функции, декорированные `@typechecked`.

* `typeguard_test` — ругается, и по делу;
* `typeguard_bug` — [пропускает ошибку](https://github.com/agronholm/typeguard/issues/276), использующую синтаксис Python 3.10+ — ещё не научился.

### Ещё

* [BearType](https://pypi.org/project/beartype/) — шустрый, но тоже с особенностями;
* и ещё найдутся =).